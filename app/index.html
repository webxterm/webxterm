<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no"/>

    <meta http-equiv="Expires" content="0">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Cache-control" content="no-cache">
    <meta http-equiv="Cache" content="no-cache">

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="browsermode" content="application">
    <meta name="full-screen" content="yes" />
    <meta name="x5-fullscreen" content="true" />
    <meta name="x5-page-mode" content="app" />
    <meta name="360-fullscreen" content="true" />


    <link rel="stylesheet" href="../css/terminal.css?version=1.3">
    <script type="text/javascript" src="../dist/webxterm.js?version=1.84"></script>
    <style>
        .key-item {
            width: 36px;
            display: inline-block;
            text-align: center;
            line-height: 34px;
            background-color: rgba(255, 255, 255, 0.5);
            border-radius: 4px;
            font-weight: bold;
            margin-left: 7px;
        }

        .key-item:last-child{
            margin-right: 7px;
        }

    </style>
</head>
<body>


<!--    <div style="display: flex; flex-direction: column">-->

<!--        <div id="test" style="width: 100vw; height: calc(100vh - 40px);"></div>-->
<!--        &lt;!&ndash;    <div style="height: 20vh"><a href="javascript:download();">下载日志文件</a></div>&ndash;&gt;-->


<!--        <div id="keyboard"-->
<!--             style="height: 40px;overflow-x: scroll; background-color: rgba(0,0,0,0.7); display: flex; align-items: center">-->
<!--            <span class="key-item"><</span>-->
<!--            <span class="key-item">ctrl</span>-->
<!--            <span class="key-item">esc</span>-->
<!--            <span class="key-item">-</span>-->
<!--            <span class="key-item">/</span>-->
<!--            <span class="key-item">alt</span>-->
<!--            <span class="key-item">ins</span>-->
<!--            <span class="key-item">del</span>-->
<!--        </div>-->


<!--    </div>-->

    <div id="test" style="width: 100vw; height: 100vh;"></div>



<script type="text/javascript">



    let el = document.getElementById('test');

    let terminal = new webxterm.Terminal({
        instance: el,
        // wsServer: "wss://a.baikai.top:444/webxterm",
        // wsServer: "ws://a.baikai.top:8899",
        // wsServer: "ws://192.168.0.100:8899",
        // wsServer: "ws://127.0.0.1:8899",
        render: (args) => {
            console.info(args.instance);
        }
    }).on({
        resize: () => {
            console.info("resize....");
        },
        updateTitle: (title) => {
            document.title = title;
            console.info("updateTitle:" + title);
        }
    })
        // .open(
        //     // '192.168.0.106',
        //     // 'baikai',
        //     // 'x+y-1=0?x&y',
        //     // 22
        //     // '103.106.245.117', 'root', '2730e5499c', 2025
        //     // '192.168.46.133', 'baikai', 'baikai#1234', 22
        //     '182.61.55.239', 'root', 'baikai#1234', 2025
        //     // '192.168.0.100', 'fei00', '0000', 22
        // );


    function download() {

        let blob = new Blob([terminal.bufferSet.printAllLines()], {type: 'text/txt,charset=UTF-8'});
        let blobURL = URL.createObjectURL(blob);
        let element = document.createElement("a");
        element.href = blobURL;
        element.download = "log.txt";
        element.click();
    }


    for (let keyItem of document.querySelectorAll(".key-item")) {
        keyItem.addEventListener("click", () => {
            alert(keyItem.innerHTML);
        });
    }

</script>
</body>
</html>